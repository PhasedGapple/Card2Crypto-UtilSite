<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout</title>

<style>

*,*::before,*::after{
margin:0;
padding:0;
box-sizing:border-box;
}

body{
font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;
background:#f5f5f7;
min-height:100vh;
display:flex;
}

/* ---------- LAYOUT ---------- */

.layout{
display:flex;
width:100%;
min-height:100vh;
flex-wrap:wrap;
}

/* LEFT */

.left{
flex:1 1 clamp(260px,32vw,420px);
background:#1a1f36;
color:#fff;
display:flex;
}

.left-inner{
padding:clamp(20px,3vw,48px);
width:100%;
max-width:520px;
margin:auto;
}

/* RIGHT */

.right{
flex:2 1 520px;
display:flex;
justify-content:center;
}

.right-inner{
width:100%;
max-width:520px;
padding:clamp(20px,3vw,48px);
display:flex;
flex-direction:column;
}

/* MOBILE STACK */

@media(max-width:850px){
.layout{
flex-direction:column;
}
.left{
flex:none;
width:100%;
}
}

/* ---------- TEXT ---------- */

.order-total{
font-size:clamp(26px,4vw,38px);
font-weight:700;
margin:12px 0 20px;
}

/* ---------- EMAIL ---------- */

.email-input{
width:100%;
height:44px;
padding:0 14px;
border-radius:8px;
border:1px solid #d8dee4;
}

/* ---------- PAYMENTS ---------- */

.pay-scroll{
display:flex;
flex-direction:column;
gap:8px;
margin:20px 0;
}

.pay-btn{
display:flex;
align-items:center;
gap:12px;
padding:12px;
border-radius:10px;
border:1.5px solid #e3e8ee;
background:#fff;
cursor:pointer;
transition:.15s;
}

.pay-btn:hover{
border-color:#635bff;
}

.pay-btn.selected{
border-color:#635bff;
box-shadow:0 0 0 3px rgba(99,91,255,.15);
}

/* ---------- BUTTON ---------- */

.checkout-btn{
height:48px;
border:none;
border-radius:10px;
background:#635bff;
color:#fff;
font-weight:600;
cursor:pointer;
}

.checkout-btn:disabled{
opacity:.5;
cursor:not-allowed;
}

</style>
</head>

<body>

<div class="layout">

<div class="left">
<div class="left-inner">

<div>Total due</div>
<div class="order-total" id="totalDisplay">$0.00</div>

<div id="billingValue"></div>

</div>
</div>


<div class="right">
<div class="right-inner">

<input class="email-input" id="emailInput" placeholder="Email">

<div class="pay-scroll" id="payList"></div>

<button class="checkout-btn" id="checkoutBtn" disabled>
Select payment method
</button>

</div>
</div>

</div>

<script>

/* ---------- PROVIDERS ---------- */

const providers=[

{id:"stripe",name:"Stripe",min:2,regions:["GLOBAL"]},

{id:"coinbase",name:"Coinbase Pay",min:2,regions:["GLOBAL"]},

{id:"ramp",name:"Ramp",min:4,regions:["GLOBAL"]},

{id:"interac",name:"Interac",min:100,regions:["CA"],currency:"CAD"},

{id:"upi",name:"UPI",min:100,regions:["IN"],currency:"INR"}

];

/* ---------- REGION DETECT ---------- */

let region="US";

try{
region=new Intl.Locale(navigator.language).region || "US";
}catch{}

/* ---------- FX ---------- */

const FX={
CAD:1.35,
INR:83
};

/* ---------- PARAMS ---------- */

const q=new URLSearchParams(location.search);

const company=q.get("company")||"Company";
const billing=q.get("billing")||"One-time";

let total=parseFloat(q.get("total")||"0");

/* ---------- CURRENCY ---------- */

let currency="USD";

if(region==="CA") currency="CAD";
if(region==="IN") currency="INR";

if(currency!=="USD"){
total*=FX[currency];
}

/* ---------- FORMAT ---------- */

const fmt=new Intl.NumberFormat(undefined,{
style:"currency",
currency
}).format(total);

document.getElementById("totalDisplay").textContent=fmt;
document.getElementById("billingValue").textContent=billing;

/* ---------- BUILD LIST ---------- */

const list=document.getElementById("payList");

let selected=null;

providers
.filter(p=>p.regions.includes("GLOBAL") || p.regions.includes(region))
.forEach(p=>{

if(total<p.min) return;

const btn=document.createElement("button");

btn.className="pay-btn";
btn.innerText=p.name;

btn.onclick=()=>{

selected=p;

document.querySelectorAll(".pay-btn")
.forEach(b=>b.classList.remove("selected"));

btn.classList.add("selected");

checkoutBtn.disabled=false;
};

list.appendChild(btn);

});

/* ---------- CHECKOUT ---------- */

checkoutBtn.onclick=()=>{

if(!selected) return;

alert("Redirect to "+selected.name);

};

</script>

</body>
</html>
